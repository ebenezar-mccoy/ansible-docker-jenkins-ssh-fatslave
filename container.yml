version: "2"
settings:
  conductor:
    base: 'debian:stretch'
  project_name: jenkins
services:
  agent:
    from: 'debian:stretch'
    roles:
      - agent
    volumes:
      - "{{ jenkins_agent_home }}"
      - /tmp
      - /run
      - /var/run
    working_dir: "{{ jenkins_agent_home }}"
    environment:
      - JAVA_HOME={{ java_open_jdk_home }}
      - M2_HOME={{ maven_home }}
      - MAVEN_HOME={{ maven_home }}
      - PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:{{ maven_home }}/bin
    expose: 22
    entrypoint: [setup-all]
registries: {}
